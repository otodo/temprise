Slimdata.pl

【概要】
GRAPHTEC Corporation のデータロガ－ GL800を用いて、
温度測定し、CSV 形式で保存した際、測定時間・測定間隔にもよるが、
データがの大容量となる。
そのまま、Excelで整形してもかまわないのだが、処理が遅くなるため、
ある一定間隔でデータを間引くことにより、データの軽量化を図る。

具体的には、前データの温度差とを比較し、0.5℃（default値）以下ならば、
そのデータは無視する。

【対象データ】
今回処理対象となるデータは下記のデータフォーマットになっているものに限る。
特に、CH1,..., CH6の部分を読み込んで、処理を行っているため、この部分がないと、
処理できない。

また、最後のAlarmは削除するようにしている。


モデル,"GL800"
バージョン,"Ver1.65  "
測定間隔,1s
測定点数,16194     
開始時刻,2012-05-25,09:29:12
終了時刻,2012-05-25,13:59:05
トリガ時刻,2012-05-25,09:29:12
アンプ設定
CH,信号名,入力,レンジ,フィルタ,スパン
CH1," CH 1",TEMP,TC_K,5,+200.0,+0.0,[C]
CH2," CH 2",TEMP,TC_K,5,+200.0,+0.0,[C]
CH3," CH 3",TEMP,TC_K,5,+200.0,+0.0,[C]
CH4," CH 4",TEMP,TC_K,5,+200.0,+0.0,[C]
CH5," CH 5",TEMP,TC_K,5,+200.0,+0.0,[C]
CH6," CH 6",TEMP,TC_K,5,+200.0,+0.0,[C]
Logic/Pulse,Off
測定値
番号,日付 時間,CH1,CH2,CH3,CH4,CH5,CH6,Alarm1  -10 ,Alarm11 -20 
NO.,Time,"degC","degC","degC","degC","degC","degC","A12345678910","A12345678910"
1,2012/5/25 09:29:12,+40.7,+33.7,+38.0,+37.7,+29.1,+26.1,LLLLLLLLLL,LLLLLLLLLL,


【使い方】
＜setting＞
 slimdata.pl 内部の
 my $ta = -1; 
 my $diff = 0.5;
 の値を適宜変更。
 
 $ta は、外部温度を測定しているchannel を意味し、それ以外のchの総和からこの値を引くことにより、
 温度上昇分を算出している。
 default の-1 は、最後のchannel を意味している。
 ch3 が外気温の場合、 
 $ta = 3; 
 と変更する。
 外気温を測定していない場合（引きたくない場合）、
 $ta = 0;
 とする。
 
 $diff は、print する判定値。
 この値以上の温度差があった場合のみprint するようにしている。
 default は0.5℃としている。
 
 上記例を用いると、 CH1 + CH2 + CH3 + CH4 + CH5 - 5 * CH6 が
 前（printする）データとの温度差が0.5℃よりあれば、print する。
 
 
＜実行例＞
perl slimdata.pl < data.csv

結果は、標準出力に出力される。


2012/5/27 23:35
